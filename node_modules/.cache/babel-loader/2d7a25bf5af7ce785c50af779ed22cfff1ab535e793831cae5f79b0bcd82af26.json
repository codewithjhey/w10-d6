{"ast":null,"code":"var _jsxFileName = \"/Users/zenith/Documents/Epicode/w10-d6/src/component/CommentsList.jsx\";\nimport { Component } from \"react\";\nimport { ListGroup, Spinner } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass CommentsList extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      comments: []\n    };\n    this.fetchComments = async () => {\n      try {\n        let response = await fetch(\"https://striveschool-api.herokuapp.com/api/comments/\" + this.props.elementId, {\n          headers: {\n            Authorization: \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2Mzg0YzcwM2Q4MDNjMjAwMTVlY2VlMzEiLCJpYXQiOjE2Njk2NDYwODQsImV4cCI6MTY3MDg1NTY4NH0.FdQ24tvMc_0QmMm3uwUUfJKldncGjsYKxSrnBNP37Bw\"\n          }\n        });\n        if (response.ok) {\n          let data = await response.json();\n          let myFeedbackArray = data.filter(comment => comment.author.includes(\"victor\"));\n          this.setState({\n            comments: myFeedbackArray\n          });\n        } else {\n          console.log(\"error fetching the comments :(\");\n          setTimeout(() => {\n            this.setState({\n              isLoading: false\n            });\n          }, 1000);\n        }\n      } catch (error) {\n        console.log(error);\n        this.setState({\n          isLoading: false\n        });\n      }\n    };\n    this.commentDelete = async commentId => {\n      try {\n        let response = await fetch(\"https://striveschool-api.herokuapp.com/api/comments/\" + commentId, {\n          method: \"DELETE\",\n          headers: {\n            Authorization: \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MzdmNmI5ZGQ4MzkzNTAwMTVlOGM0YWQiLCJpYXQiOjE2NjkyOTUwMDUsImV4cCI6MTY3MDUwNDYwNX0.ldU_NzLILQGw9ON-Dqwr_ijMy_HY92g_qu_TICsCaco\"\n          }\n        });\n        if (response.ok) {\n          alert(\"Comment is deleted!\");\n        }\n      } catch (error) {\n        alert(error);\n      }\n    };\n  }\n  componentDidMount() {\n    this.fetchComments();\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Posted Feedbacks\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n        className: \"mt-4\",\n        children: this.state.comments.map(r => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n          onClick: () => this.deleteComment(r._id),\n          children: [r.rate, \" rating out of 5 - \", r.comment]\n        }, r._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default CommentsList;","map":{"version":3,"names":["Component","ListGroup","Spinner","CommentsList","state","comments","fetchComments","response","fetch","props","elementId","headers","Authorization","ok","data","json","myFeedbackArray","filter","comment","author","includes","setState","console","log","setTimeout","isLoading","error","commentDelete","commentId","method","alert","componentDidMount","render","map","r","deleteComment","_id","rate"],"sources":["/Users/zenith/Documents/Epicode/w10-d6/src/component/CommentsList.jsx"],"sourcesContent":["import { Component } from \"react\"\nimport { ListGroup, Spinner } from \"react-bootstrap\"\n\nclass CommentsList extends Component {\n  state = {\n    comments: []\n  }\n\n  fetchComments = async () => {\n    try {\n      let response = await fetch(\n        \"https://striveschool-api.herokuapp.com/api/comments/\" +\n          this.props.elementId,\n        {\n          headers: {\n            Authorization:\n              \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2Mzg0YzcwM2Q4MDNjMjAwMTVlY2VlMzEiLCJpYXQiOjE2Njk2NDYwODQsImV4cCI6MTY3MDg1NTY4NH0.FdQ24tvMc_0QmMm3uwUUfJKldncGjsYKxSrnBNP37Bw\"\n          }\n        }\n      )\n      if (response.ok) {\n        let data = await response.json()\n        let myFeedbackArray = data.filter((comment) =>\n          comment.author.includes(\"victor\")\n        )\n        this.setState({ comments: myFeedbackArray })\n      } else {\n        console.log(\"error fetching the comments :(\")\n\n        setTimeout(() => {\n          this.setState({\n            isLoading: false\n          })\n        }, 1000)\n      }\n    } catch (error) {\n      console.log(error)\n      this.setState({\n        isLoading: false\n      })\n    }\n  }\n\n  componentDidMount() {\n    this.fetchComments()\n  }\n\n  commentDelete = async (commentId) => {\n    try {\n      let response = await fetch(\n        \"https://striveschool-api.herokuapp.com/api/comments/\" + commentId,\n        {\n          method: \"DELETE\",\n          headers: {\n            Authorization:\n              \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MzdmNmI5ZGQ4MzkzNTAwMTVlOGM0YWQiLCJpYXQiOjE2NjkyOTUwMDUsImV4cCI6MTY3MDUwNDYwNX0.ldU_NzLILQGw9ON-Dqwr_ijMy_HY92g_qu_TICsCaco\"\n          }\n        }\n      )\n      if (response.ok) {\n        alert(\"Comment is deleted!\")\n      }\n    } catch (error) {\n      alert(error)\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        {/* {this.state.isLoading && (\n          <Spinner\n            animation=\"border\"\n            role=\"status\"\n            className=\"custom-spinner-color\"\n          >\n            <span className=\"sr-only\">Loading...</span>\n          </Spinner>\n        )} */}\n        <h5>Posted Feedbacks</h5>\n        <ListGroup className=\"mt-4\">\n          {this.state.comments.map((r) => (\n            <ListGroup.Item\n              key={r._id}\n              onClick={() => this.deleteComment(r._id)}\n            >\n              {r.rate} rating out of 5 - {r.comment}\n            </ListGroup.Item>\n          ))}\n        </ListGroup>\n      </div>\n    )\n  }\n}\n\nexport default CommentsList\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,SAAS,EAAEC,OAAO,QAAQ,iBAAiB;AAAA;AAEpD,MAAMC,YAAY,SAASH,SAAS,CAAC;EAAA;IAAA;IAAA,KACnCI,KAAK,GAAG;MACNC,QAAQ,EAAE;IACZ,CAAC;IAAA,KAEDC,aAAa,GAAG,YAAY;MAC1B,IAAI;QACF,IAAIC,QAAQ,GAAG,MAAMC,KAAK,CACxB,sDAAsD,GACpD,IAAI,CAACC,KAAK,CAACC,SAAS,EACtB;UACEC,OAAO,EAAE;YACPC,aAAa,EACX;UACJ;QACF,CAAC,CACF;QACD,IAAIL,QAAQ,CAACM,EAAE,EAAE;UACf,IAAIC,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,EAAE;UAChC,IAAIC,eAAe,GAAGF,IAAI,CAACG,MAAM,CAAEC,OAAO,IACxCA,OAAO,CAACC,MAAM,CAACC,QAAQ,CAAC,QAAQ,CAAC,CAClC;UACD,IAAI,CAACC,QAAQ,CAAC;YAAEhB,QAAQ,EAAEW;UAAgB,CAAC,CAAC;QAC9C,CAAC,MAAM;UACLM,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;UAE7CC,UAAU,CAAC,MAAM;YACf,IAAI,CAACH,QAAQ,CAAC;cACZI,SAAS,EAAE;YACb,CAAC,CAAC;UACJ,CAAC,EAAE,IAAI,CAAC;QACV;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdJ,OAAO,CAACC,GAAG,CAACG,KAAK,CAAC;QAClB,IAAI,CAACL,QAAQ,CAAC;UACZI,SAAS,EAAE;QACb,CAAC,CAAC;MACJ;IACF,CAAC;IAAA,KAMDE,aAAa,GAAG,MAAOC,SAAS,IAAK;MACnC,IAAI;QACF,IAAIrB,QAAQ,GAAG,MAAMC,KAAK,CACxB,sDAAsD,GAAGoB,SAAS,EAClE;UACEC,MAAM,EAAE,QAAQ;UAChBlB,OAAO,EAAE;YACPC,aAAa,EACX;UACJ;QACF,CAAC,CACF;QACD,IAAIL,QAAQ,CAACM,EAAE,EAAE;UACfiB,KAAK,CAAC,qBAAqB,CAAC;QAC9B;MACF,CAAC,CAAC,OAAOJ,KAAK,EAAE;QACdI,KAAK,CAACJ,KAAK,CAAC;MACd;IACF,CAAC;EAAA;EAtBDK,iBAAiB,GAAG;IAClB,IAAI,CAACzB,aAAa,EAAE;EACtB;EAsBA0B,MAAM,GAAG;IACP,oBACE;MAAA,wBAUE;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAyB,eACzB,QAAC,SAAS;QAAC,SAAS,EAAC,MAAM;QAAA,UACxB,IAAI,CAAC5B,KAAK,CAACC,QAAQ,CAAC4B,GAAG,CAAEC,CAAC,iBACzB,QAAC,SAAS,CAAC,IAAI;UAEb,OAAO,EAAE,MAAM,IAAI,CAACC,aAAa,CAACD,CAAC,CAACE,GAAG,CAAE;UAAA,WAExCF,CAAC,CAACG,IAAI,yBAAqBH,CAAC,CAAChB,OAAO;QAAA,GAHhCgB,CAAC,CAACE,GAAG;UAAA;UAAA;UAAA;QAAA,QAKb;MAAC;QAAA;QAAA;QAAA;MAAA,QACQ;IAAA;MAAA;MAAA;MAAA;IAAA,QACR;EAEV;AACF;AAEA,eAAejC,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}