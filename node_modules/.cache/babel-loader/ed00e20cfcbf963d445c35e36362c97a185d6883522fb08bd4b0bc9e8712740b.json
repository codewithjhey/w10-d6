{"ast":null,"code":"var _jsxFileName = \"/Users/zenith/Documents/Epicode/w10-d6/src/component/CommentsList.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { ListGroup } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CommentsList = _ref => {\n  _s();\n  let {\n    elementId\n  } = _ref;\n  const [comment, setComment] = useState([]);\n  const fetchBookComments = async () => {\n    try {\n      let response = await fetch(\"https://striveschool-api.herokuapp.com/api/comments/\" + elementId, {\n        headers: {\n          Authorization: \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2Mzg0YzcwM2Q4MDNjMjAwMTVlY2VlMzEiLCJpYXQiOjE2Njk2NDk2MzMsImV4cCI6MTY3MDg1OTIzM30.YcT8mz69Vnd8RUxkROJEBIe1hh-HsuM2usty8yW8fpg\"\n        }\n      });\n      if (response.ok) {\n        let data = await response.json();\n        let myFeedbackArray = data.filter(comment => comment.author.includes(\"victor\"));\n        setComment({\n          comments: myFeedbackArray\n        });\n      } else {\n        console.log(\"error fetching the comments :(\");\n\n        // setTimeout(() => {\n        //   this.setState({\n        //     isLoading: false\n        //   })\n        // }, 1000)\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  // componentDidUpdate(prevProps, prevState) {\n  //   if (prevProps.elementId !== this.props.elementId) {\n  //     console.log(\"ID has been Updated\")\n  //     this.fetchBookComments()\n  //   }\n  // }\n\n  useEffect(() => {\n    console.log(\"ID has been Updated\");\n    fetchBookComments();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [elementId]);\n\n  // componentDidMount() {\n  //   this.fetchBookComments()\n  // }\n\n  useEffect(() => {\n    fetchBookComments();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const commentDelete = async commentId => {\n    try {\n      let response = await fetch(\"https://striveschool-api.herokuapp.com/api/comments/\" + commentId, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2Mzg0YzcwM2Q4MDNjMjAwMTVlY2VlMzEiLCJpYXQiOjE2Njk2NDk2MzMsImV4cCI6MTY3MDg1OTIzM30.YcT8mz69Vnd8RUxkROJEBIe1hh-HsuM2usty8yW8fpg\"\n        }\n      });\n      if (response.ok) {\n        alert(\"Comment is deleted!\");\n      }\n    } catch (error) {\n      alert(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"my-3\",\n      children: \"Posted Feedbacks\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n      className: \"mt-4\",\n      children: comment.map(c => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n        onClick: () => commentDelete(c._id),\n        children: [c.comment, \" - Rated \", c.rate, \" out of 5\"]\n      }, c._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s(CommentsList, \"yU9wlJt7BTn0Z/dLozYeIMP2Nbg=\");\n_c = CommentsList;\nexport default CommentsList;\nvar _c;\n$RefreshReg$(_c, \"CommentsList\");","map":{"version":3,"names":["useEffect","useState","ListGroup","CommentsList","elementId","comment","setComment","fetchBookComments","response","fetch","headers","Authorization","ok","data","json","myFeedbackArray","filter","author","includes","comments","console","log","error","commentDelete","commentId","method","alert","map","c","_id","rate"],"sources":["/Users/zenith/Documents/Epicode/w10-d6/src/component/CommentsList.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport { ListGroup } from \"react-bootstrap\"\n\nconst CommentsList = ({ elementId }) => {\n  const [comment, setComment] = useState([])\n\n  const fetchBookComments = async () => {\n    try {\n      let response = await fetch(\n        \"https://striveschool-api.herokuapp.com/api/comments/\" + elementId,\n        {\n          headers: {\n            Authorization:\n              \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2Mzg0YzcwM2Q4MDNjMjAwMTVlY2VlMzEiLCJpYXQiOjE2Njk2NDk2MzMsImV4cCI6MTY3MDg1OTIzM30.YcT8mz69Vnd8RUxkROJEBIe1hh-HsuM2usty8yW8fpg\"\n          }\n        }\n      )\n      if (response.ok) {\n        let data = await response.json()\n        let myFeedbackArray = data.filter((comment) =>\n          comment.author.includes(\"victor\")\n        )\n        setComment({ comments: myFeedbackArray })\n      } else {\n        console.log(\"error fetching the comments :(\")\n\n        // setTimeout(() => {\n        //   this.setState({\n        //     isLoading: false\n        //   })\n        // }, 1000)\n      }\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  // componentDidUpdate(prevProps, prevState) {\n  //   if (prevProps.elementId !== this.props.elementId) {\n  //     console.log(\"ID has been Updated\")\n  //     this.fetchBookComments()\n  //   }\n  // }\n\n  useEffect(() => {\n    console.log(\"ID has been Updated\")\n    fetchBookComments()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [elementId])\n\n  // componentDidMount() {\n  //   this.fetchBookComments()\n  // }\n\n  useEffect(() => {\n    fetchBookComments()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const commentDelete = async (commentId) => {\n    try {\n      let response = await fetch(\n        \"https://striveschool-api.herokuapp.com/api/comments/\" + commentId,\n        {\n          method: \"DELETE\",\n          headers: {\n            Authorization:\n              \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2Mzg0YzcwM2Q4MDNjMjAwMTVlY2VlMzEiLCJpYXQiOjE2Njk2NDk2MzMsImV4cCI6MTY3MDg1OTIzM30.YcT8mz69Vnd8RUxkROJEBIe1hh-HsuM2usty8yW8fpg\"\n          }\n        }\n      )\n      if (response.ok) {\n        alert(\"Comment is deleted!\")\n      }\n    } catch (error) {\n      alert(error)\n    }\n  }\n\n  return (\n    <div>\n      {/* {this.state.isLoading && (\n          <Spinner\n            animation=\"border\"\n            role=\"status\"\n            className=\"custom-spinner-color\"\n          >\n            <span className=\"sr-only\">Loading...</span>\n          </Spinner>\n        )} */}\n      <h5 className=\"my-3\">Posted Feedbacks</h5>\n      <ListGroup className=\"mt-4\">\n        {comment.map((c) => (\n          <ListGroup.Item key={c._id} onClick={() => commentDelete(c._id)}>\n            {c.comment} - Rated {c.rate} out of 5\n          </ListGroup.Item>\n        ))}\n      </ListGroup>\n    </div>\n  )\n}\n\nexport default CommentsList\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,SAAS,QAAQ,iBAAiB;AAAA;AAE3C,MAAMC,YAAY,GAAG,QAAmB;EAAA;EAAA,IAAlB;IAAEC;EAAU,CAAC;EACjC,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGL,QAAQ,CAAC,EAAE,CAAC;EAE1C,MAAMM,iBAAiB,GAAG,YAAY;IACpC,IAAI;MACF,IAAIC,QAAQ,GAAG,MAAMC,KAAK,CACxB,sDAAsD,GAAGL,SAAS,EAClE;QACEM,OAAO,EAAE;UACPC,aAAa,EACX;QACJ;MACF,CAAC,CACF;MACD,IAAIH,QAAQ,CAACI,EAAE,EAAE;QACf,IAAIC,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,EAAE;QAChC,IAAIC,eAAe,GAAGF,IAAI,CAACG,MAAM,CAAEX,OAAO,IACxCA,OAAO,CAACY,MAAM,CAACC,QAAQ,CAAC,QAAQ,CAAC,CAClC;QACDZ,UAAU,CAAC;UAAEa,QAAQ,EAAEJ;QAAgB,CAAC,CAAC;MAC3C,CAAC,MAAM;QACLK,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;;QAE7C;QACA;QACA;QACA;QACA;MACF;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;IACpB;EACF,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;;EAEAtB,SAAS,CAAC,MAAM;IACdoB,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;IAClCd,iBAAiB,EAAE;IACnB;EACF,CAAC,EAAE,CAACH,SAAS,CAAC,CAAC;;EAEf;EACA;EACA;;EAEAJ,SAAS,CAAC,MAAM;IACdO,iBAAiB,EAAE;IACnB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMgB,aAAa,GAAG,MAAOC,SAAS,IAAK;IACzC,IAAI;MACF,IAAIhB,QAAQ,GAAG,MAAMC,KAAK,CACxB,sDAAsD,GAAGe,SAAS,EAClE;QACEC,MAAM,EAAE,QAAQ;QAChBf,OAAO,EAAE;UACPC,aAAa,EACX;QACJ;MACF,CAAC,CACF;MACD,IAAIH,QAAQ,CAACI,EAAE,EAAE;QACfc,KAAK,CAAC,qBAAqB,CAAC;MAC9B;IACF,CAAC,CAAC,OAAOJ,KAAK,EAAE;MACdI,KAAK,CAACJ,KAAK,CAAC;IACd;EACF,CAAC;EAED,oBACE;IAAA,wBAUE;MAAI,SAAS,EAAC,MAAM;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAsB,eAC1C,QAAC,SAAS;MAAC,SAAS,EAAC,MAAM;MAAA,UACxBjB,OAAO,CAACsB,GAAG,CAAEC,CAAC,iBACb,QAAC,SAAS,CAAC,IAAI;QAAa,OAAO,EAAE,MAAML,aAAa,CAACK,CAAC,CAACC,GAAG,CAAE;QAAA,WAC7DD,CAAC,CAACvB,OAAO,eAAWuB,CAAC,CAACE,IAAI;MAAA,GADRF,CAAC,CAACC,GAAG;QAAA;QAAA;QAAA;MAAA,QAG3B;IAAC;MAAA;MAAA;MAAA;IAAA,QACQ;EAAA;IAAA;IAAA;IAAA;EAAA,QACR;AAEV,CAAC;AAAA,GAjGK1B,YAAY;AAAA,KAAZA,YAAY;AAmGlB,eAAeA,YAAY;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}