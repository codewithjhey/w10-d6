{"ast":null,"code":"var _jsxFileName = \"/Users/zenith/Documents/Epicode/w10-d6/src/component/CommentsList.jsx\";\nimport { Component } from \"react\";\nimport { ListGroup } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass CommentsList extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      comments: []\n    };\n    this.fetchBookComments = async () => {\n      try {\n        let response = await fetch(\"https://striveschool-api.herokuapp.com/api/comments/\" + this.props.elementId, {\n          headers: {\n            Authorization: \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2Mzg0YzcwM2Q4MDNjMjAwMTVlY2VlMzEiLCJpYXQiOjE2Njk2NDk2MzMsImV4cCI6MTY3MDg1OTIzM30.YcT8mz69Vnd8RUxkROJEBIe1hh-HsuM2usty8yW8fpg\"\n          }\n        });\n        if (response.ok) {\n          let data = await response.json();\n          let myFeedbackArray = data.filter(comment => comment.author.includes(\"victor\"));\n          this.setState({\n            comments: myFeedbackArray\n          });\n        } else {\n          console.log(\"error fetching the comments :(\");\n          setTimeout(() => {\n            this.setState({\n              isLoading: false\n            });\n          }, 1000);\n        }\n      } catch (error) {\n        console.log(error);\n        this.setState({\n          isLoading: false\n        });\n      }\n    };\n    this.commentDelete = async commentId => {\n      try {\n        let response = await fetch(\"https://striveschool-api.herokuapp.com/api/comments/\" + commentId, {\n          method: \"DELETE\",\n          headers: {\n            Authorization: \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2Mzg0YzcwM2Q4MDNjMjAwMTVlY2VlMzEiLCJpYXQiOjE2Njk2NDk2MzMsImV4cCI6MTY3MDg1OTIzM30.YcT8mz69Vnd8RUxkROJEBIe1hh-HsuM2usty8yW8fpg\"\n          }\n        });\n        if (response.ok) {\n          alert(\"Comment is deleted!\");\n        }\n      } catch (error) {\n        alert(error);\n      }\n    };\n  }\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.elementId !== this.props.elementId) {\n      console.log(\"ID has been Updated\");\n      this.fetchBookComments();\n    }\n  }\n  componentDidMount() {\n    this.fetchBookComments();\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"my-3\",\n        children: \"Posted Feedbacks\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n        className: \"mt-4\",\n        children: this.state.comments.map(c => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n          onClick: () => this.deleteComment(c._id),\n          children: [c.rate, \" rating out of 5 - \", c.comment]\n        }, c._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default CommentsList;","map":{"version":3,"names":["Component","ListGroup","CommentsList","state","comments","fetchBookComments","response","fetch","props","elementId","headers","Authorization","ok","data","json","myFeedbackArray","filter","comment","author","includes","setState","console","log","setTimeout","isLoading","error","commentDelete","commentId","method","alert","componentDidUpdate","prevProps","prevState","componentDidMount","render","map","c","deleteComment","_id","rate"],"sources":["/Users/zenith/Documents/Epicode/w10-d6/src/component/CommentsList.jsx"],"sourcesContent":["import { Component } from \"react\"\nimport { ListGroup } from \"react-bootstrap\"\n\nclass CommentsList extends Component {\n  state = {\n    comments: []\n  }\n\n  fetchBookComments = async () => {\n    try {\n      let response = await fetch(\n        \"https://striveschool-api.herokuapp.com/api/comments/\" +\n          this.props.elementId,\n        {\n          headers: {\n            Authorization:\n              \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2Mzg0YzcwM2Q4MDNjMjAwMTVlY2VlMzEiLCJpYXQiOjE2Njk2NDk2MzMsImV4cCI6MTY3MDg1OTIzM30.YcT8mz69Vnd8RUxkROJEBIe1hh-HsuM2usty8yW8fpg\"\n          }\n        }\n      )\n      if (response.ok) {\n        let data = await response.json()\n        let myFeedbackArray = data.filter((comment) =>\n          comment.author.includes(\"victor\")\n        )\n        this.setState({ comments: myFeedbackArray })\n      } else {\n        console.log(\"error fetching the comments :(\")\n\n        setTimeout(() => {\n          this.setState({\n            isLoading: false\n          })\n        }, 1000)\n      }\n    } catch (error) {\n      console.log(error)\n      this.setState({\n        isLoading: false\n      })\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.elementId !== this.props.elementId) {\n      console.log(\"ID has been Updated\")\n      this.fetchBookComments()\n    }\n  }\n\n  componentDidMount() {\n    this.fetchBookComments()\n  }\n\n  commentDelete = async (commentId) => {\n    try {\n      let response = await fetch(\n        \"https://striveschool-api.herokuapp.com/api/comments/\" + commentId,\n        {\n          method: \"DELETE\",\n          headers: {\n            Authorization:\n              \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2Mzg0YzcwM2Q4MDNjMjAwMTVlY2VlMzEiLCJpYXQiOjE2Njk2NDk2MzMsImV4cCI6MTY3MDg1OTIzM30.YcT8mz69Vnd8RUxkROJEBIe1hh-HsuM2usty8yW8fpg\"\n          }\n        }\n      )\n      if (response.ok) {\n        alert(\"Comment is deleted!\")\n      }\n    } catch (error) {\n      alert(error)\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        {/* {this.state.isLoading && (\n          <Spinner\n            animation=\"border\"\n            role=\"status\"\n            className=\"custom-spinner-color\"\n          >\n            <span className=\"sr-only\">Loading...</span>\n          </Spinner>\n        )} */}\n        <h5 className=\"my-3\">Posted Feedbacks</h5>\n        <ListGroup className=\"mt-4\">\n          {this.state.comments.map((c) => (\n            <ListGroup.Item\n              key={c._id}\n              onClick={() => this.deleteComment(c._id)}\n            >\n              {c.rate} rating out of 5 - {c.comment}\n            </ListGroup.Item>\n          ))}\n        </ListGroup>\n      </div>\n    )\n  }\n}\n\nexport default CommentsList\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,SAAS,QAAQ,iBAAiB;AAAA;AAE3C,MAAMC,YAAY,SAASF,SAAS,CAAC;EAAA;IAAA;IAAA,KACnCG,KAAK,GAAG;MACNC,QAAQ,EAAE;IACZ,CAAC;IAAA,KAEDC,iBAAiB,GAAG,YAAY;MAC9B,IAAI;QACF,IAAIC,QAAQ,GAAG,MAAMC,KAAK,CACxB,sDAAsD,GACpD,IAAI,CAACC,KAAK,CAACC,SAAS,EACtB;UACEC,OAAO,EAAE;YACPC,aAAa,EACX;UACJ;QACF,CAAC,CACF;QACD,IAAIL,QAAQ,CAACM,EAAE,EAAE;UACf,IAAIC,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,EAAE;UAChC,IAAIC,eAAe,GAAGF,IAAI,CAACG,MAAM,CAAEC,OAAO,IACxCA,OAAO,CAACC,MAAM,CAACC,QAAQ,CAAC,QAAQ,CAAC,CAClC;UACD,IAAI,CAACC,QAAQ,CAAC;YAAEhB,QAAQ,EAAEW;UAAgB,CAAC,CAAC;QAC9C,CAAC,MAAM;UACLM,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;UAE7CC,UAAU,CAAC,MAAM;YACf,IAAI,CAACH,QAAQ,CAAC;cACZI,SAAS,EAAE;YACb,CAAC,CAAC;UACJ,CAAC,EAAE,IAAI,CAAC;QACV;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdJ,OAAO,CAACC,GAAG,CAACG,KAAK,CAAC;QAClB,IAAI,CAACL,QAAQ,CAAC;UACZI,SAAS,EAAE;QACb,CAAC,CAAC;MACJ;IACF,CAAC;IAAA,KAaDE,aAAa,GAAG,MAAOC,SAAS,IAAK;MACnC,IAAI;QACF,IAAIrB,QAAQ,GAAG,MAAMC,KAAK,CACxB,sDAAsD,GAAGoB,SAAS,EAClE;UACEC,MAAM,EAAE,QAAQ;UAChBlB,OAAO,EAAE;YACPC,aAAa,EACX;UACJ;QACF,CAAC,CACF;QACD,IAAIL,QAAQ,CAACM,EAAE,EAAE;UACfiB,KAAK,CAAC,qBAAqB,CAAC;QAC9B;MACF,CAAC,CAAC,OAAOJ,KAAK,EAAE;QACdI,KAAK,CAACJ,KAAK,CAAC;MACd;IACF,CAAC;EAAA;EA7BDK,kBAAkB,CAACC,SAAS,EAAEC,SAAS,EAAE;IACvC,IAAID,SAAS,CAACtB,SAAS,KAAK,IAAI,CAACD,KAAK,CAACC,SAAS,EAAE;MAChDY,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;MAClC,IAAI,CAACjB,iBAAiB,EAAE;IAC1B;EACF;EAEA4B,iBAAiB,GAAG;IAClB,IAAI,CAAC5B,iBAAiB,EAAE;EAC1B;EAsBA6B,MAAM,GAAG;IACP,oBACE;MAAA,wBAUE;QAAI,SAAS,EAAC,MAAM;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAsB,eAC1C,QAAC,SAAS;QAAC,SAAS,EAAC,MAAM;QAAA,UACxB,IAAI,CAAC/B,KAAK,CAACC,QAAQ,CAAC+B,GAAG,CAAEC,CAAC,iBACzB,QAAC,SAAS,CAAC,IAAI;UAEb,OAAO,EAAE,MAAM,IAAI,CAACC,aAAa,CAACD,CAAC,CAACE,GAAG,CAAE;UAAA,WAExCF,CAAC,CAACG,IAAI,yBAAqBH,CAAC,CAACnB,OAAO;QAAA,GAHhCmB,CAAC,CAACE,GAAG;UAAA;UAAA;UAAA;QAAA,QAKb;MAAC;QAAA;QAAA;QAAA;MAAA,QACQ;IAAA;MAAA;MAAA;MAAA;IAAA,QACR;EAEV;AACF;AAEA,eAAepC,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}